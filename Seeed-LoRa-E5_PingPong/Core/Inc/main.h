/* USER CODE BEGIN Header */
/**
  ******************************************************************************
  * @file           : main.h
  * @brief          : Header for main.c file.
  *                   This file contains the common defines of the application.
  ******************************************************************************
  * @attention
  *
  * Copyright (c) 2022 STMicroelectronics.
  * All rights reserved.
  *
  * This software is licensed under terms that can be found in the LICENSE file
  * in the root directory of this software component.
  * If no LICENSE file comes with this software, it is provided AS-IS.
  *
  ******************************************************************************
  */
/* USER CODE END Header */

/* Define to prevent recursive inclusion -------------------------------------*/
#ifndef __MAIN_H
#define __MAIN_H

#ifdef __cplusplus
extern "C" {
#endif

/* Includes ------------------------------------------------------------------*/
#include "stm32wlxx_hal.h"

/* Private includes ----------------------------------------------------------*/
/* USER CODE BEGIN Includes */

/* USER CODE END Includes */

/* Exported types ------------------------------------------------------------*/
/* USER CODE BEGIN ET */
typedef enum {
	NONE,
	INITIALIZING,
	ERRO,
	TEST,
	SEND_ACTIVATE,
	SEND_SUSPEND,
	VV_ACTIVATED,
	VV_SUSPENDED,
	RESET_MEMORY,
} Machine_States_t;
/* USER CODE END ET */

/* Exported constants --------------------------------------------------------*/
/* USER CODE BEGIN EC */

static uint8_t numeroCadeado = 2;
static uint8_t numeroCentral = 3;


static uint32_t tokens[1000] = { 70235501, 68694739, 80539872, 67770865, 95292676,
		80799349, 44950887, 83196287, 80270230, 47195260, 95096527, 90507643,
		16339820, 58059095, 24404749, 62233119, 38519956, 96851373, 83671187,
		18240506, 62411676, 61635736, 33035719, 55587387, 83539356, 44397047,
		72955391, 23361672, 39035574, 96151466, 79696140, 58247868, 37678749,
		88312893, 18512385, 47550568, 43788229, 93523991, 70119465, 11042170,
		71053442, 58345680, 15122390, 35425101, 27957609, 98497130, 92360281,
		96598756, 28432834, 86012564, 25229094, 31366744, 46993295, 75824810,
		85411410, 80981235, 57661498, 38575884, 69976436, 21564653, 56373331,
		54200321, 61932297, 37736558, 14464802, 26614398, 76044095, 84218734,
		15076099, 13043338, 10399609, 23545880, 10561298, 45949703, 77600962,
		24592459, 67406699, 97968109, 45065605, 53734189, 73318090, 71463702,
		73992018, 56920177, 78717102, 70132382, 21438743, 86231487, 52546315,
		59231203, 65276007, 75731833, 38998118, 33620575, 10867075, 84520291,
		74107675, 76106363, 90150889, 38077724, 72392038, 17877479, 30856681,
		50618533, 33092923, 37587659, 46976355, 60015236, 76924414, 44046787,
		67876842, 50291882, 81470908, 22340324, 58852665, 86895056, 93811447,
		79426065, 96354387, 71034331, 54986266, 71543334, 14552958, 61651301,
		88545500, 11597481, 76178657, 72307448, 38818216, 45386373, 48708290,
		23750148, 64256872, 12296757, 45436639, 16462501, 33294606, 67061543,
		84183082, 29643207, 35761119, 40246384, 77881549, 40350190, 98792017,
		99479060, 49413173, 30906391, 68786032, 80403834, 37988298, 19100052,
		60924358, 36509425, 39867097, 28837494, 74049819, 42300243, 10983975,
		65253818, 60781386, 78532787, 29189373, 15252785, 53493364, 80890417,
		78823284, 89375568, 74437053, 68790569, 73724649, 77291976, 68581799,
		73195164, 62358878, 46461143, 40806192, 19525952, 17272554, 18319077,
		35033998, 11824250, 93906587, 25750628, 19644350, 18727669, 26069599,
		46817477, 34777692, 63566267, 87032049, 30802118, 94936424, 52732784,
		19131947, 85669463, 56711485, 37371687, 52701064, 97955076, 67123394,
		68951601, 64960990, 40557853, 30634450, 51593021, 51809280, 78228512,
		91948736, 53456078, 95001417, 74265020, 18459810, 55343002, 96739773,
		36745295, 95980147, 59450790, 28806395, 43284088, 28788432, 77187968,
		15838483, 69869125, 19902824, 11290790, 49092627, 30765820, 58829858,
		95094402, 53970554, 21888792, 82596843, 78320391, 86147390, 29608473,
		95777910, 55844112, 40180448, 59155364, 97005448, 56654925, 86105283,
		75203792, 19652826, 92531756, 45962763, 71811670, 33174128, 68975780,
		32206160, 27176917, 83249841, 45600254, 70630401, 30742058, 21527726,
		45403762, 64984865, 84847513, 15010181, 31810708, 12957543, 49441630,
		47457504, 50701019, 20712432, 21123191, 24853681, 87224278, 99549994,
		54333994, 50472366, 68108825, 26853224, 39196137, 42091801, 51125229,
		25517695, 90771009, 71319669, 34511086, 67937451, 17589488, 18861404,
		35441958, 78664030, 68813165, 38433561, 91469963, 90994695, 92512661,
		78139780, 22042953, 75834995, 73130745, 88540290, 76838621, 23276624,
		33539779, 88415543, 16170621, 67356239, 80290089, 15809638, 53586301,
		69670299, 14381924, 93751776, 21988763, 50792824, 88850025, 38041036,
		25077536, 72068524, 64252202, 55451186, 86722010, 91878102, 49772606,
		89715786, 13793176, 33563722, 77652622, 35223319, 53216420, 15333261,
		38758240, 63503348, 95492553, 78262218, 32105751, 23769500, 82403858,
		39810354, 20221231, 78672804, 38973703, 37203759, 47905302, 22288443,
		39142324, 51026282, 31446276, 63277627, 12553195, 70140362, 27825475,
		53112201, 83870901, 61884720, 16564257, 98737792, 71765664, 19242135,
		82836030, 83347561, 61212406, 60948833, 97580735, 92257177, 14046900,
		66248537, 98744794, 66743389, 99398422, 72908662, 96620145, 24593727,
		35219966, 62637317, 56756638, 99341962, 93761199, 21547457, 30481927,
		51055424, 49968930, 17578236, 82928583, 75994690, 53569663, 66048538,
		43680013, 70566784, 99556235, 55096331, 58109487, 83583888, 24953596,
		97404080, 83237887, 56118588, 53750577, 92143113, 36461355, 83557254,
		51407205, 91660330, 39106751, 79820639, 16391556, 64138852, 38235883,
		13285042, 67008883, 97803868, 69577757, 80895136, 48129385, 30958436,
		36755428, 67469484, 78609541, 50249835, 74816151, 86491699, 16565540,
		50226284, 15555914, 61265154, 10048042, 48063846, 67505297, 51739270,
		84445143, 18016017, 73788395, 27469649, 81745304, 56189109, 86500113,
		31729193, 65466740, 89738382, 12730608, 94900828, 17817601, 29543506,
		22428479, 88975136, 90531884, 27312085, 28613307, 76237906, 44053338,
		59092565, 68520566, 79226437, 41767171, 48512067, 75570070, 48814980,
		46125453, 74273883, 64635372, 40219060, 30820195, 80046324, 52813648,
		95841973, 24632507, 79401028, 35982640, 47460453, 44485392, 18557266,
		17318341, 32196933, 65700446, 51964816, 15116232, 84933792, 68530304,
		22905579, 23909001, 95591131, 87571441, 94415604, 48077080, 67390347,
		72756977, 67207380, 66471115, 11931748, 52167933, 85697281, 98919552,
		17351542, 13101110, 40515682, 77842880, 19557460, 19778952, 21035461,
		17202436, 11266424, 57859505, 22773064, 74225346, 34712831, 69093211,
		31409329, 11490993, 77441212, 57785992, 42079509, 92296050, 89489234,
		80078319, 82916255, 87480613, 50267175, 16689035, 42117725, 21081257,
		57377583, 30266678, 60409377, 46680427, 41763607, 42987755, 80747305,
		26444782, 61531312, 38349756, 14905770, 44952577, 75161676, 43197246,
		48735966, 87511198, 44643634, 67224041, 59494486, 84019941, 86368038,
		55518218, 99300395, 99811574, 65763022, 12982361, 92343622, 30146600,
		21866726, 15399346, 28692969, 97826193, 17187161, 51322353, 23268641,
		60115346, 58831979, 52852191, 20410852, 32703845, 62652347, 53732230,
		94971167, 59414906, 35492192, 19845802, 96617707, 51923877, 13226388,
		99280466, 65868762, 79753231, 34333721, 48953238, 32854513, 18267449,
		38479394, 21039234, 59297166, 47976412, 12217357, 57555289, 50370257,
		65257880, 31293384, 17779511, 52793657, 71599067, 27151034, 26091141,
		90510369, 63987607, 70589431, 52914379, 67014292, 25273490, 56290182,
		75214196, 38370224, 79838721, 29998420, 74086633, 89503535, 87259772,
		66377512, 37659863, 43659605, 74254295, 78164281, 85702769, 13842685,
		32626829, 61745728, 86148028, 57357731, 82320249, 40833364, 30341706,
		59288295, 50678297, 37510633, 85025996, 28221222, 24780641, 29295411,
		20784078, 28968725, 84535670, 35763374, 54975029, 61103102, 96960627,
		82552891, 21666043, 81718710, 32684454, 45711482, 12111662, 10633093,
		69647552, 87284697, 43599131, 25010977, 42988980, 82523471, 83922230,
		39107695, 67711846, 54445648, 28462375, 93045680, 39536970, 58499516,
		23723385, 39262364, 20096264, 35411162, 93593192, 82320060, 23771275,
		53403418, 88622282, 92283980, 13687484, 54957575, 40412448, 43892055,
		88660143, 11065462, 45952184, 27387133, 68437355, 63544286, 93018613,
		88023193, 60286564, 73683632, 99861804, 93711487, 75475067, 83237050,
		95221450, 26417481, 45255780, 46421263, 12047593, 97992913, 36180873,
		70007306, 94785639, 34582732, 64371977, 55902595, 42266411, 34324734,
		95357793, 33920136, 43021135, 71287914, 95407456, 62776365, 75233482,
		16320362, 65736709, 75673694, 92388556, 85029986, 93561171, 77296618,
		40873395, 57268790, 71752024, 35890433, 25157675, 92182342, 96139420,
		96713686, 56800591, 65120616, 58044558, 31498152, 77744411, 21217491,
		55651268, 82328729, 66399195, 88783674, 42376349, 49579237, 53531991,
		52100244, 58146092, 61702701, 53672557, 78600732, 23512521, 44878205,
		37756507, 20479490, 61276786, 38672636, 68589035, 77524467, 18029365,
		66254268, 71674646, 11118653, 87842032, 81881984, 58482918, 53468227,
		40061565, 26342559, 48203057, 17989999, 61568336, 15305228, 92862648,
		34550295, 69529283, 16982149, 83757916, 67430071, 47958965, 10028326,
		30121098, 50673242, 72377540, 60638885, 25084831, 65171520, 76925425,
		53753681, 84640378, 59267329, 77104090, 47367865, 39744206, 99001745,
		19839484, 32165839, 73945160, 31660113, 66573165, 75632126, 82318478,
		63943411, 40058744, 62877078, 29320448, 27599409, 58015999, 82146375,
		47501831, 26914080, 10084583, 60627319, 84445449, 93484642, 24722599,
		60529492, 51974142, 63194898, 65332007, 34341244, 60158667, 40913625,
		68240146, 60306643, 45071878, 80443712, 52584399, 83214272, 90757375,
		17196842, 44098333, 14324017, 45407166, 14795230, 96189798, 77899797,
		23210951, 28471326, 76061565, 72857918, 21173747, 50745851, 16542421,
		76819717, 30637011, 63371676, 33670494, 96991763, 97934168, 90736169,
		18297854, 61099947, 28901611, 83346996, 12184099, 50117535, 91035925,
		48179595, 39362261, 61666582, 96134184, 56757103, 12787972, 73361846,
		74098594, 45331586, 62377020, 73480830, 14514599, 92053851, 91667166,
		64985314, 18021681, 87358240, 29346514, 52778103, 58386027, 84491559,
		41501340, 93245973, 21043667, 89306068, 65870657, 27184498, 99822939,
		25320066, 56629917, 87271701, 38197579, 78343078, 82552872, 87607936,
		29877130, 58418429, 82310074, 41686730, 61903839, 59862621, 70033458,
		82365202, 16578793, 20642427, 66697945, 35188060, 79596770, 52806828,
		51217492, 10469043, 79359704, 50649350, 46111786, 57952692, 44697684,
		65666051, 68619906, 77603380, 19121345, 38275210, 30388813, 23391114,
		46857972, 84110575, 48384934, 66880085, 74103366, 65856541, 99439238,
		59669486, 33213550, 46143936, 12069624, 49232506, 25673308, 33692851,
		66458937, 23906448, 11114200, 55838174, 61771872, 30810492, 97671542,
		74000902, 56674869, 45807416, 12966987, 12749787, 50913527, 22035260,
		74484390, 14311622, 59749102, 55225422, 14609573, 63783777, 46060804,
		14051080, 72726014, 79519449, 83658417, 50238728, 36551438, 93933772,
		67672494, 58733419, 66323624, 88902992, 56415598, 21174152, 49761442,
		10381023, 44757155, 71214168, 99176868, 92453372, 21236596, 70680179,
		91143552, 34730655, 38744172, 27025839, 77951447, 90991147, 77264302,
		37937655, 23134444, 20776965, 18817147, 82210700, 30509549, 38768201,
		80051416, 58635911, 65568628, 42972324, 76592652, 62898491, 63854552,
		75357419, 94817866, 15141045, 84360905, 15398942, 41881799, 32651608,
		89616208, 49014355, 18182665, 13410164, 67779036, 15914440, 87222779,
		35850479, 34798598, 49106406, 26681671, 89632535, 28049311, 74317175,
		51313119 };


/* USER CODE END EC */

/* Exported macro ------------------------------------------------------------*/
/* USER CODE BEGIN EM */

/* USER CODE END EM */

/* Exported functions prototypes ---------------------------------------------*/
void Error_Handler(void);

/* USER CODE BEGIN EFP */
int32_t LED_control(int value);
uint8_t check_interruption_receiver_frame_cc(void);
uint8_t check_receiver_frame_rc(void);
uint8_t check_finish_frame_rc(void);
/* USER CODE END EFP */

/* Private defines -----------------------------------------------------------*/

#define FLASH_USER_START_ADDR   0x0803F000   /* Start @ of user Flash area */
#define FLASH_USER_END_ADDR     0x0803F800//0x08000007//(ADDR_FLASH_PAGE_127 + FLASH_PAGE_SIZE - 1)   /* End @ of user Flash area */

#define DATA_64                 ((uint64_t)0x1360000000000001)
#define DATA_32                 ((uint32_t)0x12345678)


#define RTC_N_PREDIV_S 10
#define RTC_PREDIV_S ((1<<RTC_N_PREDIV_S)-1)
#define RTC_PREDIV_A ((1<<(15-RTC_N_PREDIV_S))-1)

#define USARTx_RX_Pin GPIO_PIN_7
#define USARTx_RX_GPIO_Port GPIOB
#define L2_Pin GPIO_PIN_5
#define L2_GPIO_Port GPIOB
#define DBG1_Pin GPIO_PIN_0
#define DBG1_GPIO_Port GPIOA
#define BUT1_Pin GPIO_PIN_13
#define BUT1_GPIO_Port GPIOB
#define BUT1_EXTI_IRQn EXTI15_10_IRQn
#define USARTx_TX_Pin GPIO_PIN_6
#define USARTx_TX_GPIO_Port GPIOB

#define RF_CTRL1_Pin GPIO_PIN_4
#define RF_CTRL1_GPIO_Port GPIOA
#define RF_CTRL2_Pin GPIO_PIN_5
#define RF_CTRL2_GPIO_Port GPIOA

#define PLAY1_Pin GPIO_PIN_9
#define PLAY1_GPIO_Port GPIOA
#define PLAY3_Pin GPIO_PIN_1
#define PLAY3_GPIO_Port GPIOC
#define BOTAO2_Pin GPIO_PIN_3
#define BOTAO2_GPIO_Port GPIOA
#define BOTAO1_Pin GPIO_PIN_2
#define BOTAO1_GPIO_Port GPIOA
#define PLAY2_Pin GPIO_PIN_10
#define PLAY2_GPIO_Port GPIOB
#define PLAY5_Pin GPIO_PIN_15
#define PLAY5_GPIO_Port GPIOA
#define PLAY6_Pin GPIO_PIN_15
#define PLAY6_GPIO_Port GPIOB
#define PLAY8_Pin GPIO_PIN_3
#define PLAY8_GPIO_Port GPIOB
#define PLAY7_Pin GPIO_PIN_4
#define PLAY7_GPIO_Port GPIOB
#define PLAY4_Pin GPIO_PIN_9
#define PLAY4_GPIO_Port GPIOB
#define LED2_Pin GPIO_PIN_14
#define LED2_GPIO_Port GPIOB
#define LED1_Pin GPIO_PIN_10
#define LED1_GPIO_Port GPIOA


/* USER CODE BEGIN Private defines */

#define REMOTE_CONTROL	1
//#define TESTE 1


#define LED1_ON 		HAL_GPIO_WritePin(LED1_GPIO_Port, LED1_Pin, 0);
#define LED1_OFF 		HAL_GPIO_WritePin(LED1_GPIO_Port, LED1_Pin, 1);

#define LED2_ON 		HAL_GPIO_WritePin(LED2_GPIO_Port, LED2_Pin, 0);
#define LED2_OFF 		HAL_GPIO_WritePin(LED2_GPIO_Port, LED2_Pin, 1);

#define DISPLAY1_ON 	HAL_GPIO_WritePin(PLAY1_GPIO_Port, PLAY1_Pin, 0);
#define DISPLAY1_OFF 	HAL_GPIO_WritePin(PLAY1_GPIO_Port, PLAY1_Pin, 1);

#define DISPLAY2_ON 	HAL_GPIO_WritePin(PLAY2_GPIO_Port, PLAY2_Pin, 0);
#define DISPLAY2_OFF 	HAL_GPIO_WritePin(PLAY2_GPIO_Port, PLAY2_Pin, 1);

#define DISPLAY3_ON 	HAL_GPIO_WritePin(PLAY3_GPIO_Port, PLAY3_Pin, 0);
#define DISPLAY3_OFF 	HAL_GPIO_WritePin(PLAY3_GPIO_Port, PLAY3_Pin, 1);

#define DISPLAY4_ON 	HAL_GPIO_WritePin(PLAY4_GPIO_Port, PLAY4_Pin, 0);
#define DISPLAY4_OFF 	HAL_GPIO_WritePin(PLAY4_GPIO_Port, PLAY4_Pin, 1);

#define DISPLAY5_ON 	HAL_GPIO_WritePin(PLAY5_GPIO_Port, PLAY5_Pin, 0);
#define DISPLAY5_OFF 	HAL_GPIO_WritePin(PLAY5_GPIO_Port, PLAY5_Pin, 1);

#define DISPLAY6_ON 	HAL_GPIO_WritePin(PLAY6_GPIO_Port, PLAY6_Pin, 0);
#define DISPLAY6_OFF 	HAL_GPIO_WritePin(PLAY6_GPIO_Port, PLAY6_Pin, 1);

#define DISPLAY7_ON 	HAL_GPIO_WritePin(PLAY7_GPIO_Port, PLAY7_Pin, 0);
#define DISPLAY7_OFF 	HAL_GPIO_WritePin(PLAY7_GPIO_Port, PLAY7_Pin, 1);

#define DISPLAY8_ON 	HAL_GPIO_WritePin(PLAY8_GPIO_Port, PLAY8_Pin, 0);
#define DISPLAY8_OFF 	HAL_GPIO_WritePin(PLAY8_GPIO_Port, PLAY8_Pin, 1);

#define BOTAO1_STATUS	  HAL_GPIO_ReadPin(BOTAO1_GPIO_Port, BOTAO1_Pin);
#define BOTAO2_STATUS	  HAL_GPIO_ReadPin(BOTAO2_GPIO_Port, BOTAO2_Pin);

/*
    In this example TIM2 input clock (TIM2CLK)  is set to APB1 clock (PCLK1),
    since APB1 prescaler is equal to 1.
      TIM2CLK = PCLK1
      PCLK1 = HCLK
      => TIM2CLK = HCLK = SystemCoreClock
    To get TIM2 counter clock at 10 KHz, the Prescaler is computed as following:
    Prescaler = (TIM2CLK / TIM2 counter clock) - 1
    Prescaler = (SystemCoreClock /10 KHz) - 1

    Note:
     SystemCoreClock variable holds HCLK frequency and is defined in system_stm32wlxx.c file.
     Each time the core clock (HCLK) changes, user had to update SystemCoreClock
     variable value. Otherwise, any configuration based on this variable will be incorrect.
     This variable is updated in three ways:
      1) by calling CMSIS function SystemCoreClockUpdate()
      2) by calling HAL API function HAL_RCC_GetSysClockFreq()
      3) each time HAL_RCC_ClockConfig() is called to configure the system clock frequency
  ----------------------------------------------------------------------- */

/* Compute the prescaler value to have TIMx counter clock equal to 10000 Hz */

#define PRESCALER_VALUE (uint32_t)(((SystemCoreClock) / (10000)) - 1)

  /* Initialize TIMx peripheral as follows:
       + Period = 10000 - 1
       + Prescaler = (SystemCoreClock/10000) - 1
       + ClockDivision = 0
       + Counter direction = Up
  */

#define PERIOD_VALUE (10000 - 1);
/* USER CODE END Private defines */

#ifdef __cplusplus
}
#endif

#endif /* __MAIN_H */
